
# Telegram Message Scheduler Bot (Jack)

Jack is a Telegram Bot developed using Typescript. His purpose is to provide an enviroment to store messages (announcements, reminders, etc) and broadcast them among registered groups.

## Installation

Jack is made with `Typescript`, so `Node.js` is used to deal with initialization and dependencies. The version of node used is `v14.16.1` with npm version `v6.14.12`.

Project dependencies can be installed with command:

```bash

npm install

```  

## Configuration

The configuration of the bot is made by environment variables, with can be manually inserted (in case of Linux with `export` command) or using a `.env` file. The variables required are the following:

- BOT_TOKEN: The Token generated by the `Telegram Bot Father`

- DATABASE_URL: The URL used to connect to the database (required by prisma)

- PORT: The port in which the server will be listening

## Initialization

The initialization may be performed in two different ways, either by compiling the Typescript code (which by tsconfig.json outDir will be compiled to `dist` folder) with the following command:

```bash

npx tsc

node dist/index.js

```

Or it can be done with the dependency `ts-node-dev` that starts a server to monitor the project files, restarting the application with any changes applied and saved to files. The dependency can be used in the following command:

```bash

npx ts-node-dev src/index.ts

```

## Usage

After performing the previous steps, talking to the bot through commands allows to use the bot accordingly to the desired purpose. The main steps are registering chats and adding messages for posting.

<p align="center">
  <img style="padding: 0px 15px 0px 15px;" src="https://media0.giphy.com/media/cKnGUVYou9tcJbiQnQ/giphy.gif" alt="Add Command"/>
  <img style="padding: 0px 15px 0px 15px;" src="https://media2.giphy.com/media/3ESh5frl6oGfoXFP9Y/giphy.gif" alt="Del Command"/>
</p>

### Commands

Currently there are five available commands as described below:

- comandos: List all available commands of the bot
- register: Registers a group chat id for redistribution of messages (called on group)
- add: Starts the add wizard to add a message. The steps are the following:

 1. Send the Message or forward a Message to be stored
 2. Inform the period which the message will be distributed. Accepted formats:

  - number ( in minutes ) | _e.g._ 10
  - number + m | _e.g._ 15m
  - number + h | _e.g._ 1h
  - number + h + number ( in minutes ) | _e.g._ 1h20
  - number + h + number + m | _e.g._ 2h30m
 
 3. Preview displayed asking to confirm the message or restart the process
 4. Confirmation of message registration

- del: Deletes a single message. Available messages are displayed on keyboard.
- clear: Clear all messages stored
